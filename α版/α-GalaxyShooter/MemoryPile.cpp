//===================================================================================================================================
//yMemoryPile.cppz
// [ì¬ŽÒ]HAL“Œ‹žGP12A332 11 ›–ì Ž÷
// [ì¬“ú]2019/05/16
// [XV“ú]2019/08/04
//===================================================================================================================================
#include "MemoryPile.h"
using namespace memoryPileNS;

//===================================================================================================================================
//yƒRƒ“ƒXƒgƒ‰ƒNƒ^z
//===================================================================================================================================
MemoryPile::MemoryPile()
{
	lostTime = 0;
	onLost = false;
	inActivation();
}

//===================================================================================================================================
//yƒfƒXƒgƒ‰ƒNƒ^z
//===================================================================================================================================
MemoryPile::~MemoryPile()
{

}

//===================================================================================================================================
//y‰Šú‰»z
//===================================================================================================================================
void MemoryPile::initialize(LPDIRECT3DDEVICE9 device, StaticMesh* _staticMesh, D3DXVECTOR3* _position)
{
	Object::initialize(device, _staticMesh, _position);
}

//===================================================================================================================================
//yXVz
//===================================================================================================================================
void MemoryPile::update(float frameTime)
{
	lost(frameTime);

	Object::update();
}

//===================================================================================================================================
//y•`‰æz
//===================================================================================================================================
void MemoryPile::render(LPDIRECT3DDEVICE9 device, D3DXMATRIX view, D3DXMATRIX projection, D3DXVECTOR3 cameraPositon)
{
	Object::render(device, view, projection, cameraPositon);
}

//===================================================================================================================================
//yÁŽ¸ˆ—z
//[ˆ—]ƒtƒ‰ƒO‚ª
//===================================================================================================================================
void MemoryPile::lost(float frameTime)
{
	if (!onLost)return;
	lostTime += frameTime;
	alpha -= frameTime;
	if (lostTime > LOST_TIME)
	{
		inActivation();
		reset();
	}
}

void MemoryPile::reset()
{
	lostTime = 0.0f;
	alpha = 1.0f;
	onLost = false;
}


void MemoryPile::switchLost()
{
	onLost = true;
	switchTransparent(true);
	switchOperationAlpha(true);
}

bool MemoryPile::ready()
{
	return !onLost;
}